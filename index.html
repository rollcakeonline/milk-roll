<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ç”Ÿä¹³æ²è¨‚è³¼ç¶²</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body{
  font-family:'Poppins',sans-serif;
  background:linear-gradient(135deg,#FFF0F5,#FFE4E1);
  overflow-x:hidden;
}
h1{font-weight:600}

/* èƒŒæ™¯æ³¡æ³¡ */
#bubbles{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1}
.bubble{
  position:absolute;
  border-radius:50%;
  opacity:.5;
  animation:rise 10s linear infinite;
}
@keyframes rise{
  0%{transform:translateY(100vh)}
  100%{transform:translateY(-50vh)}
}

/* å¡ç‰‡ */
.card{
  border-radius:20px;
  background:#fff3f8;
  box-shadow:0 4px 12px rgba(0,0,0,.1);
  transition:.3s;
  position:relative;
}
.card:hover{transform:translateY(-5px)}

/* æ„›å¿ƒ */
.heart{
  position:absolute;
  top:10px;right:10px;
  font-size:24px;
  animation:float 1.5s infinite;
}
@keyframes float{
  0%{transform:translateY(0)}
  50%{transform:translateY(-8px)}
  100%{transform:translateY(0)}
}

/* æŒ‰éˆ• */
.btn-sweet{
  background:#FFB6C1;
  color:#fff;
  border-radius:25px;
}
.btn-sweet:active{transform:scale(.95)}

/* è³¼ç‰©è»Š */
.cart-box{
  background:#FFF0F5;
  padding:20px;
  border-radius:15px;
}

/* ç¸½åƒ¹å‹•ç•« */
#total.animate{
  animation:price .3s ease;
}
@keyframes price{
  0%{transform:scale(1)}
  50%{transform:scale(1.2)}
  100%{transform:scale(1)}
}

/* é£›å…¥è³¼ç‰©è»Šå‹•ç•« */
.fly{
  position:fixed;
  z-index:999;
  font-size:24px;
  animation:flyToCart .8s ease forwards;
}
@keyframes flyToCart{
  to{
    transform:translate(60vw,-40vh) scale(.2);
    opacity:0;
  }
}
</style>
</head>

<body>

<div id="bubbles"></div>

<div class="container py-4">
<h1 class="text-center mb-4">ğŸ° ç”Ÿä¹³æ²è¨‚è³¼ç¶²ç«™</h1>

<!-- å•†å“ -->
<div class="row g-4">
  <!-- é‡è¤‡ 6 å€‹ -->
  <script>
    const products=[
      ["åŸå‘³ç”Ÿä¹³æ²",330,"ğŸ®","roll1.jpg"],
      ["å·§å…‹åŠ›ç”Ÿä¹³æ²",330,"ğŸ«","roll2.jpg"],
      ["æŠ¹èŒ¶ç”Ÿä¹³æ²",330,"ğŸµ","roll3.jpg"],
      ["ææ‹‰ç±³è˜‡ç”Ÿä¹³æ²",499,"â˜•","roll4.jpg"],
      ["èŠ‹æ³¥ç”Ÿä¹³æ²",499,"ğŸ ","roll5.jpg"],
      ["è‰è“ç”Ÿä¹³æ²",499,"ğŸ“","roll6.jpg"]
    ];
  </script>
</div>

<div id="productRow" class="row g-4"></div>

<!-- è³¼ç‰©è»Š -->
<div class="cart-box mt-5">
<h4>ğŸ›’ è³¼ç‰©è»Š</h4>
<div id="cartList">é‚„æ²’æœ‰å•†å“</div>
<h5 class="mt-2">ç¸½åƒ¹ï¼šNT$ <span id="total">0</span></h5>

<!-- å–è²¨æ–¹å¼ -->
<select id="pickupMethod" class="form-control mb-2">
  <option value="è‡ªå–">è‡ªå–</option>
  <option value="å®…é…">å®…é…</option>
</select>

<!-- å–è²¨æ—¥æœŸ -->
<input
  type="date"
  id="pickupDate"
  class="form-control mb-2"
>

<input id="name" class="form-control mb-2" placeholder="å§“å">
<input id="phone" class="form-control mb-2" placeholder="é›»è©±">
<input id="email" class="form-control mb-2" placeholder="Emailï¼ˆæ”¶ç¢ºèªä¿¡ï¼‰">

<form id="paypalForm" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="upload" value="1">
<input type="hidden" name="business" value="w0930170153@gmail.com">
<input type="hidden" name="currency_code" value="TWD">
<button type="submit" class="btn btn-sweet w-100 mt-2">çµå¸³</button>
</form>
</div>
</div>

<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
emailjs.init("lTjQlr749IV9zSp0c");

const row=document.getElementById("productRow");
products.forEach(p=>{
  row.innerHTML+=`
  <div class="col-md-4">
    <div class="card p-3 text-center">
      <div class="heart">${p[2]}</div>
      <img src="images/${p[3]}" class="img-fluid rounded">
      <h5 class="mt-2">${p[0]}</h5>
      <p>NT$${p[1]}</p>
      <button class="btn btn-sweet add" data-name="${p[0]}" data-price="${p[1]}">åŠ å…¥è³¼ç‰©è»Š</button>
    </div>
  </div>`;
});

let cart=[];
function updateCart(){
  const list=document.getElementById("cartList");
  const totalEl=document.getElementById("total");
  const paypal=document.getElementById("paypalForm");
  list.innerHTML=""; let total=0;
  paypal.querySelectorAll("input[name^='item_']").forEach(e=>e.remove());

  cart.forEach((i,n)=>{
    total+=i.price*i.qty;
    list.innerHTML+=`${i.name} x ${i.qty}<br>`;
    ["item_name","amount","quantity"].forEach(k=>{
      const input=document.createElement("input");
      input.type="hidden";
      input.name=`${k}_${n+1}`;
      input.value=k=="item_name"?i.name:k=="amount"?i.price:i.qty;
      paypal.appendChild(input);
    });
  });

  totalEl.textContent=total;
  totalEl.classList.remove("animate");
  void totalEl.offsetWidth;
  totalEl.classList.add("animate");
}

document.addEventListener("click",e=>{
  if(e.target.classList.contains("add")){
    const n=e.target.dataset.name,p=+e.target.dataset.price;
    const f=cart.find(i=>i.name===n);
    f?f.qty++:cart.push({name:n,price:p,qty:1});
    updateCart();

    const fly=document.createElement("div");
    fly.textContent="ğŸ›’";
    fly.className="fly";
    fly.style.left=e.clientX+"px";
    fly.style.top=e.clientY+"px";
    document.body.appendChild(fly);
    setTimeout(()=>fly.remove(),800);
  }
});

document.getElementById("paypalForm").onsubmit=e=>{
  const name=nameEl=document.getElementById("name").value;
  const phone=document.getElementById("phone").value;
  const email=document.getElementById("email").value;
  if(!name||!phone||!email||cart.length==0){
    alert("è«‹å¡«å®Œæ•´è³‡æ–™ä¸¦é¸å•†å“");
    e.preventDefault(); return;
  }
  let items = "";
cart.forEach(i => {
  items += `${i.name} x ${i.qty}ï¼ˆå–®åƒ¹ NT$${i.price}ï¼‰\n`;
});
  const data = {
  name: name,
  phone: phone,
  email: email,
  product: items,
  total: document.getElementById("total").innerText,
  pickup_method: document.getElementById("pickupMethod").value,
  pickup_date: document.getElementById("pickupDate").value
};

  emailjs.send("service_mcvontk","template_wdfonnc",data);
  emailjs.send("service_mcvontk","template_wdfonnc",{...data,email:"rollroom.tw@gmail.com"});
};

// æ³¡æ³¡
const b=document.getElementById("bubbles");
for(let i=0;i<20;i++){
  const d=document.createElement("div");
  d.className="bubble";
  const s=Math.random()*30+20;
  d.style.width=d.style.height=s+"px";
  d.style.left=Math.random()*100+"%";
  d.style.background=`rgba(255,182,193,${Math.random()})`;
  d.style.animationDuration=Math.random()*5+5+"s";
  b.appendChild(d);
}
</script>

</body>
</html>
